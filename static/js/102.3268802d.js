(self["webpackChunkdashboard_edit_ui"]=self["webpackChunkdashboard_edit_ui"]||[]).push([[102],{3541:function(e,t,i){"use strict";i.d(t,{Hj:function(){return o},_u:function(){return r},eA:function(){return a},lf:function(){return c}});const a={code:200,msg:"ok",data:[{label:"项目",name:"project",count:2},{label:"其它",name:"other",count:3}]},r={code:200,msg:"ok",data:[{cardId:"project-overview",category:"project",creatorId:"admin",modifierId:"admin",title:"项目概况",description:"项目概况",picUrl:"项目概况",w:25,h:20},{cardId:"code-library-overview",category:"other",creatorId:"admin",modifierId:"admin",title:"代码库概况",description:"代码库概况",picUrl:"代码库概况",w:50,h:12},{cardId:"product-library-overview",category:"other",creatorId:"admin",modifierId:"admin",title:"制品库概况",description:"制品库概况",picUrl:"制品库概况",w:50,h:8},{cardId:"app-library-overview",category:"other",creatorId:"admin",modifierId:"admin",title:"应用库概况",description:"应用库概况",picUrl:"应用库概况",w:21,h:20},{cardId:"follow-project",category:"project",creatorId:"admin",modifierId:"admin",title:"重点关注项目情况",description:"重点关注项目情况",picUrl:"重点项目关注情况",w:100,h:12}]},o={code:200,msg:"ok",data:[{cardId:"project-overview",category:"project",creatorId:"admin",modifierId:"admin",title:"项目概况",description:"项目概况",w:26,h:20,active:!0,x:0,y:0,i:0,moved:!1},{cardId:"code-library-overview",category:"other",creatorId:"admin",modifierId:"admin",title:"代码库概况",description:"代码库概况",w:50,h:12,active:!0,x:27,y:0,i:1,moved:!1},{cardId:"product-library-overview",category:"other",creatorId:"admin",modifierId:"admin",title:"制品库概况",description:"制品库概况",w:50,h:8,active:!0,x:27,y:12,i:2,moved:!1},{cardId:"app-library-overview",category:"other",creatorId:"admin",modifierId:"admin",title:"应用库概况",description:"应用库概况",w:22,h:20,active:!0,x:78,y:0,i:3,moved:!1},{cardId:"follow-project",category:"project",creatorId:"admin",modifierId:"admin",title:"重点关注项目情况",description:"重点关注项目情况",picUrl:"重点项目关注情况",w:100,h:12,active:!0,x:0,y:20,i:4,moved:!1}]},c={code:200,msg:"ok",data:[{cardId:"project-overview",category:"other",creatorId:"admin",modifierId:"admin",title:"项目概况",description:"项目概况",w:26,h:20,active:!0,x:0,y:0,i:0,moved:!1},{cardId:"code-library-overview",category:"other",creatorId:"admin",modifierId:"admin",title:"代码库概况",description:"代码库概况",w:73,h:20,active:!0,x:27,y:0,i:1,moved:!1},{cardId:"product-library-overview",category:"other",creatorId:"admin",modifierId:"admin",title:"制品库概况",description:"制品库概况",w:50,h:9,active:!0,x:0,y:20,i:2,moved:!1},{cardId:"app-library-overview",category:"other",creatorId:"admin",modifierId:"admin",title:"应用库概况",description:"应用库概况",w:47,h:9,active:!0,x:53,y:20,i:3,moved:!1},{cardId:"follow-project",category:"other",creatorId:"admin",modifierId:"admin",title:"重点关注项目情况",description:"重点关注项目情况",picUrl:"重点项目关注情况",w:100,h:12,active:!0,x:0,y:29,i:4,moved:!1}]}},1382:function(e,t,i){"use strict";i.d(t,{g:function(){return r}});var a=i(3541);function r(e){return"1"===e?JSON.parse(JSON.stringify(a.Hj)):"2"===e?JSON.parse(JSON.stringify(a.lf)):void 0}},5353:function(e,t,i){"use strict";i.d(t,{O:function(){return o},m:function(){return r}});var a=i(3541);function r(){return JSON.parse(JSON.stringify(a._u))}function o(){return JSON.parse(JSON.stringify(a.eA))}},9102:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return X}});var a=i(6252),r=i(3577);const o={class:"flex flex-column height-100-percent"},c={class:"flex justify-space-between font-size-20px font-weight mb-12px"},n=(0,a.Uk)(" 自定义指标卡 "),l=(0,a.Uk)(" 选择指标卡 "),d=(0,a.Uk)(" 仪表盘设置 "),s=(0,a.Uk)("取消"),u={class:"report-save flex-1 overflow-scroll padding-20px"},p={class:"edit-target-card flex flex-column",style:{position:"relative"}},m={class:"flex justify-end align-center pb-20px",style:{position:"absolute",top:"0",right:"0"}},g=(0,a.Uk)("仅供参考"),f={class:"flex bg-gray-1 border-radius-6px color-info padding-2px"},v=["onClick"],w=["onClick"],h={class:"chart-item flex-1"};function y(e,t,i,y,b,x){const _=(0,a.up)("svg-icon"),I=(0,a.up)("el-button"),k=(0,a.up)("el-tag"),L=(0,a.up)("el-tooltip"),T=(0,a.up)("grid-item"),W=(0,a.up)("grid-layout"),U=(0,a.up)("report-save-drawer"),C=(0,a.up)("el-drawer"),D=(0,a.up)("setting-drawer");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",o,[(0,a._)("div",c,[(0,a._)("div",null,[(0,a.Wm)(_,{"icon-class":"back",onClick:t[0]||(t[0]=t=>e.$router.go(-1))}),(0,a.Uk)(" "+(0,r.zw)(x.title),1)]),(0,a._)("div",null,[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,{"icon-class":"plus"}),n])),_:1}),(0,a.Wm)(I,{onClick:x.openDrawer},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{"icon-class":"plus"}),l])),_:1},8,["onClick"]),(0,a.Wm)(I,{onClick:x.openSettingDrawer},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{"icon-class":"setting"}),d])),_:1},8,["onClick"]),(0,a.Wm)(I,{onClick:x.handleCancel},{default:(0,a.w5)((()=>[s])),_:1},8,["onClick"]),(0,a.Wm)(I,{type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(x.saveBtn),1)])),_:1})])]),(0,a._)("div",u,[(0,a.Wm)(W,{layout:b.editTargetList,"onUpdate:layout":t[1]||(t[1]=e=>b.editTargetList=e),"col-num":100,"row-height":10,"is-draggable":!0,"is-resizable":!0,responsive:!1,"vertical-compact":!0,"use-css-transforms":!1},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(b.editTargetList,((e,t)=>((0,a.wg)(),(0,a.j4)(T,{key:e.cardId,x:e.x,y:e.y,w:e.w,h:e.h,i:e.i},{default:(0,a.w5)((()=>[(0,a._)("div",p,[(0,a._)("div",m,[(0,a.Wm)(k,{type:"info",class:"mr-5px"},{default:(0,a.w5)((()=>[g])),_:1}),(0,a._)("div",f,[(0,a.Wm)(L,{content:"点击设置宽度50%",placement:"top"},{default:(0,a.w5)((()=>[(0,a._)("span",{style:{width:"2em"},class:(0,r.C_)(["flex align-center justify-center cursor-pointer",50===e.w?"color-primary border-radius-4px box-shadow-small bg-white":""]),onClick:t=>e.w=50},[(0,a.Wm)(_,{"icon-class":"layout-banhang",class:"font-size-20px"})],10,v)])),_:2},1024),(0,a.Wm)(L,{content:"点击设置宽度100%",placement:"top"},{default:(0,a.w5)((()=>[(0,a._)("span",{style:{width:"2em"},class:(0,r.C_)(["flex align-center justify-center cursor-pointer",100===e.w?"color-primary border-radius-4px box-shadow-small bg-white":""]),onClick:t=>e.w=100},[(0,a.Wm)(_,{"icon-class":"layout-zhenghang",class:"font-size-20px"})],10,w)])),_:2},1024)]),(0,a.Wm)(L,{content:"移除",placement:"top"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{link:"",type:"info",onClick:t=>x.handleDel(e.cardId),class:"ml-5px"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{"icon-class":"delete",class:"font-size-16px"})])),_:2},1032,["onClick"])])),_:2},1024)]),(0,a._)("div",h,[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.cardId)))])])])),_:2},1032,["x","y","w","h","i"])))),128))])),_:1},8,["layout"])])]),(0,a.Wm)(C,{modelValue:b.drawer,"onUpdate:modelValue":t[4]||(t[4]=e=>b.drawer=e),title:"选择指标卡",size:"min(800px,100%)","destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{onCancel:t[2]||(t[2]=e=>b.drawer=!1),onOk:t[3]||(t[3]=e=>b.drawer=!1)})])),_:1},8,["modelValue"]),(0,a.Wm)(C,{modelValue:b.settingDrawer,"onUpdate:modelValue":t[7]||(t[7]=e=>b.settingDrawer=e),title:"仪表盘设置",size:"min(400px,100%)","destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{onCancel:t[5]||(t[5]=e=>b.settingDrawer=!1),onOk:t[6]||(t[6]=e=>b.settingDrawer=!1)})])),_:1},8,["modelValue"])],64)}const b={class:"height-100-percent flex flex-column"},x={class:"flex-1 overflow-scroll"},_={class:"grid grid-gap-20px grid-template-columns-200px"},I=["onClick"],k={style:{"min-height":"150px",height:"150px",background:"#f1f2f6"}},L={class:"pt-20px flex justify-space-between"},T=(0,a.Uk)(" 已选 "),W={class:"color-primary pl-10px pr-10px"},U=(0,a.Uk)(" 个选项卡 "),C=(0,a.Uk)("取消"),D=(0,a.Uk)("确定");function j(e,t,o,c,n,l){const d=(0,a.up)("el-tag"),s=(0,a.up)("el-tab-pane"),u=(0,a.up)("el-tabs"),p=(0,a.up)("svg-icon"),m=(0,a.up)("el-image"),g=(0,a.up)("el-tooltip"),f=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)("div",b,[(0,a.Wm)(u,{modelValue:n.activeTab,"onUpdate:modelValue":t[0]||(t[0]=e=>n.activeTab=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.tabList,(e=>((0,a.wg)(),(0,a.j4)(s,{key:e.name,label:e.label,name:e.name},{label:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.label)+" ",1),(0,a.Wm)(d,{effect:"light",round:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.count),1)])),_:2},1024)])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,a._)("div",x,[(0,a._)("div",_,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.filterTargetList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:(0,r.C_)(["target-card",e.active?"active":""]),key:e.cardId,onClick:t=>e.active=!e.active},[e.active?((0,a.wg)(),(0,a.j4)(p,{key:0,"icon-class":"success-filled",class:"success-filled"})):(0,a.kq)("",!0),(0,a._)("div",k,[(0,a.Wm)(m,{src:i(1650)("./"+e.picUrl+".png")},null,8,["src"])]),(0,a._)("div",null,[(0,a.Uk)((0,r.zw)(e.title)+" ",1),(0,a.Wm)(g,{content:e.description,placement:"top"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{"icon-class":"question",class:"color-info"})])),_:2},1032,["content"])])],10,I)))),128))])]),(0,a._)("div",L,[(0,a._)("div",null,[T,(0,a._)("span",W,(0,r.zw)(l.drawerActiveTargetList.length)+"/"+(0,r.zw)(n.targetList.length),1),U]),(0,a._)("div",null,[(0,a.Wm)(f,{onClick:t[1]||(t[1]=t=>e.$emit("cancel"))},{default:(0,a.w5)((()=>[C])),_:1}),(0,a.Wm)(f,{type:"primary",onClick:l.handleImport},{default:(0,a.w5)((()=>[D])),_:1},8,["onClick"])])])])}var A=i(5353),O=i(5684);const S=(0,O.Q_)({id:"cart",state:()=>({activeTargetList:[]}),getters:{},actions:{setActiveTargetList(e){this.activeTargetList=e},delActiveTarget(e){this.activeTargetList.splice(this.activeTargetList.findIndex((t=>t.cardId===e)),1)},clearActiveTarget(){this.activeTargetList=[]}}});var z={name:"ReportSaveDrawer",components:{},data(){return{tabList:[],activeTab:"all",targetList:[]}},computed:{...(0,O.rn)(S,["activeTargetList"]),drawerActiveTargetList(){return this.targetList.filter((e=>e.active))},filterTargetList(){return"all"===this.activeTab?this.targetList:this.targetList.filter((e=>e.category===this.activeTab))}},created(){this.getTabList(),this.getTargetList()},methods:{...(0,O.nv)(S,["setActiveTargetList"]),handleImport(){let e=[];this.drawerActiveTargetList.forEach(((t,i)=>{let a=this.activeTargetList.find((e=>e.cardId===t.cardId));a?e.push({...a,y:0,i:i}):e.push({...t,x:0,y:0,w:t.w||12,h:t.h||2,i:i})})),this.setActiveTargetList(e),this.$emit("ok")},async getTabList(){const{data:e}=await(0,A.O)();this.tabList=e},async getTargetList(){const{data:e}=await(0,A.m)();this.targetList=e,this.tabList.unshift({label:"全部指标卡",name:"all",count:e.length}),this.targetList.forEach((e=>{this.activeTargetList.forEach((t=>{e.cardId===t.cardId&&(e.active=t.active)}))}))}}},V=i(3744);const N=(0,V.Z)(z,[["render",j],["__scopeId","data-v-14d52b92"]]);var E=N,J=i(1382),$=i(7502),R=i(7147);const H={class:"height-100-percent flex flex-column"},B={class:"flex-1"},G={class:"pt-20px flex justify-end"},Y=(0,a.Uk)("取消"),q=(0,a.Uk)("确定");function K(e,t,i,r,o,c){const n=(0,a.up)("el-input"),l=(0,a.up)("el-form-item"),d=(0,a.up)("el-option"),s=(0,a.up)("el-select"),u=(0,a.up)("el-form"),p=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)("div",H,[(0,a._)("div",B,[(0,a.Wm)(u,{"label-width":"100px",rules:o.formRules},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{label:"仪表盘名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{modelValue:o.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(l,{label:"背景图",prop:"bg"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:o.form.bg,"onUpdate:modelValue":t[1]||(t[1]=e=>o.form.bg=e),style:{width:"100%"},clearable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{label:"背景图1",value:"1"}),(0,a.Wm)(d,{label:"背景图2",value:"2"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["rules"])]),(0,a._)("div",G,[(0,a._)("div",null,[(0,a.Wm)(p,{onClick:t[2]||(t[2]=t=>e.$emit("cancel"))},{default:(0,a.w5)((()=>[Y])),_:1}),(0,a.Wm)(p,{type:"primary",onClick:t[3]||(t[3]=t=>e.$emit("ok"))},{default:(0,a.w5)((()=>[q])),_:1})])])])}var Z={name:"setting-drawer",components:{},data(){return{form:{name:"管理员工作台",bg:"1"},formRules:{name:[{required:!0,message:"必填",trigger:"blur"}]}}},computed:{},created(){},methods:{}};const F=(0,V.Z)(Z,[["render",K]]);var M=F,Q={name:"ReportSave",components:{SettingDrawer:M,SvgIcon:R["default"],ReportSaveDrawer:E,GridLayout:$.GridLayout,GridItem:$.GridItem},data(){return{id:this.$route.params.id||"",drawer:!1,settingDrawer:!1,grid:void 0,editTargetList:[]}},computed:{...(0,O.rn)(S,["activeTargetList"]),isEdit(){return Boolean(this.$route.params.id)},title(){return this.isEdit?"修改仪表盘/"+("1"===this.id?"管理员工作台":"自定义仪表盘"):"新建仪表盘"},saveBtn(){return this.isEdit?"更新":"保存"}},watch:{activeTargetList:{handler(e){this.editTargetList=e},deep:!0}},created(){this.isEdit?this.getReportDetail():this.clearActiveTarget()},mounted(){},methods:{...(0,O.nv)(S,["setActiveTargetList","delActiveTarget","clearActiveTarget"]),async getReportDetail(){const{data:e}=(0,J.g)(this.id);e.forEach((e=>{e.active=!0})),this.editTargetList=e},openDrawer(){this.drawer=!0,console.log(JSON.stringify(this.editTargetList)),this.setActiveTargetList(this.editTargetList)},openSettingDrawer(){this.settingDrawer=!0},handleDel(e){this.setActiveTargetList(this.editTargetList),this.delActiveTarget(e)},handleCancel(){this.$confirm("离开后将不保留编辑内容","确认要离开当前编辑页面吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{this.$router.go(-1)})).catch((()=>{console.log("1")}))}},unmounted(){this.clearActiveTarget()}};const P=(0,V.Z)(Q,[["render",y],["__scopeId","data-v-a1c72d9c"]]);var X=P},1650:function(e,t,i){var a={"./代码库概况.png":3282,"./制品库概况.png":809,"./应用库概况.png":3932,"./重点项目关注情况.png":7650,"./项目概况.png":204};function r(e){var t=o(e);return i(t)}function o(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=1650},3282:function(e,t,i){"use strict";e.exports=i.p+"static/img/代码库概况.2c0cb85b.png"},809:function(e,t,i){"use strict";e.exports=i.p+"static/img/制品库概况.ac09333e.png"},3932:function(e,t,i){"use strict";e.exports=i.p+"static/img/应用库概况.31ccdb20.png"},7650:function(e,t,i){"use strict";e.exports=i.p+"static/img/重点项目关注情况.cf5747f8.png"},204:function(e,t,i){"use strict";e.exports=i.p+"static/img/项目概况.3beff453.png"}}]);